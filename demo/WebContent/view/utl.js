(function(){var a={},b=navigator.userAgent.toLowerCase();a.isIE=/msie/i.test(b),a.isIE6=/msie 6/.test(b),a.C=function(a){var b;return a=a.toUpperCase(),a=="TEXT"?b=document.createTextNode(""):a=="BUFFER"?b=document.createDocumentFragment():b=document.createElement(a),b},a.E=function(a){return typeof a=="string"?document.getElementById(a):a},a.addEvent=function(b,c,d){b=a.E(b),b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent?b.attachEvent("on"+c,d):b["on"+c]=d},a.removeEvent=function(b,c,d){b=a.E(b),b.removeEventListener?b.removeEventListener(c,d,!1):b.detachEvent?b.detachEvent("on"+c,d):b["on"+c]=null},a.getEvent=function(){if(a.isIE)return window.event;if(window.event)return window.event;var b=arguments.callee.caller,c,d=0;while(b!=null&&d<40){c=b.arguments[0];if(!(!c||c.constructor!=Event&&c.constructor!=MouseEvent&&c.constructor!=KeyboardEvent))return c;d++,b=b.caller}return c},a.fixEvent=function(b){return b=b||a.getEvent(),b.target||(b.target=b.srcElement,b.pageX=b.x,b.pageY=b.y),typeof b.layerX=="undefined"&&(b.layerX=b.offsetX),typeof b.layerY=="undefined"&&(b.layerY=b.offsetY),b},a.extend=function(a,b,c){var d,e={};b=b||{};for(d in a)e[d]=a[d],b[d]!=null&&(c?a.hasOwnProperty[d]&&(e[d]=b[d]):e[d]=b[d]);return e},a.getUrlParam=function(a){var b=window.location.href.substring(window.location.href.indexOf("?")+1);b=b.replace(/%22/g,'"');if(b.indexOf(a)<0)return"";var c=b.substring(b.indexOf(a));return c.indexOf("&")>=0?c=c.substring(c.indexOf("=")+1,c.indexOf("&")):c=c.substring(c.indexOf("=")+1),c},a.jCookie={set:function(a,b,c){var d=[],e,f,g={expire:720,path:"/",domain:document.domain,secure:null,encode:!0};g.encode==1&&(b=escape(b)),d.push(a+"="+b),g.path!=null&&d.push("path="+g.path),g.domain!=null&&d.push("domain="+g.domain),g.secure!=null&&d.push(g.secure),g.expire!=null&&(e=new Date,f=e.getTime()+g.expire*36e5,e.setTime(f),d.push("expires="+e.toGMTString())),document.cookie=d.join(";")},get:function(a){a=a.replace(/([\.\[\]\$])/g,"\\$1");var b=new RegExp(a+"=([^;]*)?;","i"),c=document.cookie+";",d=c.match(b);return d?d[1]||"":""},remove:function(a,b){b=b||{},b.expire=-10,$.jcookie.set(a,"",b)}},window.BDK=a})(),function(a){var b=function(b){function f(){b.setPosition==null&&(e.dlg.style.top=document.documentElement.scrollTop+document.documentElement.clientHeight/2-e.dlg.offsetHeight/2+"px",e.dlg.style.left=(document.body.clientWidth-e.dlg.scrollWidth)/2+"px")}function g(){e.layer.style.width=Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth)+"px",e.layer.style.height=Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight)+"px"}function h(){if(a.isIE6){var b=document.getElementsByTagName("select");for(var c=0;c<b.length;c++)b[c].style.visibility="hidden"}}function i(){b.setPosition instanceof Function&&a.addEvent(window,"resize",function(){e.setPosition()}),a.addEvent(e.dlg,"click",function(){var c,d=a.fixEvent().target;c=d.getAttribute("_act");switch(c){case"dialogCancel":b.funCancel(),e.hide();break;case"dialogOk":b.funOk(),e.hide();break;default:}})}var c={content:"\u5185\u5bb9",funOk:function(){},funCancel:function(){},dragable:!1,bridge:null,width:"300px",height:"250px",mask:!0,opacity:30,setPosition:null};b=a.extend(c,b);var d="{#content#}",e=this;e.dlg=null,this.setPosition=function(){if(b.setPosition instanceof Function){var a={};b.setPosition(a),e.dlg.style.left=a.x,e.dlg.style.top=a.y}else b.setPosition!=null&&(e.dlg.style.left=b.setPosition.x,e.dlg.style.top=b.setPosition.y)},this.setContent=function(a){e.dlg.innerHTML=a},this.setMiddle=function(){e.dlg.style.top=document.documentElement.scrollTop+document.documentElement.clientHeight/2-e.dlg.offsetHeight/2+"px",e.dlg.style.left=(document.body.clientWidth-e.dlg.scrollWidth)/2+"px"},this.show=function(){h(),e.dlg.style.display="",b.mask?e.layer.style.display="":e.layer.style.display="none"},this.hide=function(){e.dlg.style.display="none",e.layer.style.display="none";var a=document.getElementsByTagName("select");for(var b=0;b<a.length;b++)a[b].style.visibility="visible"},this.init=function(){var c=this.build(),d=a.C("div"),h=a.C("div");e.dlg=d,e.layer=h,d.id="dig_"+this.getUniqueId(),d.className="dlg",d.innerHTML=c,document.body.appendChild(d),document.body.appendChild(h),d.style.zIndex="9999",d.style.width=b.width,d.style.height=b.height,d.style.display="none",d.style.position=a.isIE6?"absolute":"fixed",d.style.top=(document.documentElement.clientHeight-parseInt(d.style.height,10)+parseInt(document.body.scrollTop,10))/2+"px",d.style.left=(document.body.clientWidth-parseInt(d.style.width,10)+parseInt(document.body.scrollLeft,10))/2+"px",h.id="layer_"+this.getUniqueId(),h.style.display="none",h.style.width=h.style.height="100%",h.style.position=a.isIE6?"absolute":"fixed",h.style.top=h.style.left=0,h.style.backgroundColor="#000",h.style.zIndex="9998",h.style.opacity=b.opacity/100,a.isIE&&(h.style.filter="alpha(opacity="+b.opacity+")"),a.isIE6&&(g(),f(),a.addEvent(window,"scroll",function(){f()}),a.addEvent(window,"resize",function(){f(),g()})),i(d),this.setPosition()},this.build=function(){var a="";return d=d.replace(/{#content#}/,b.content),a=d,a},this.getUniqueId=function(){var a=(new Date).getTime().toString(),b=1;return a+b++},this.init(),a.DRAGDROP.createDD({target:e.dlg,dragable:b.dragable})},c={};c.createDlg=function(a){return new b(a)},a.DIALOG=c}(BDK),function(a){var b=function(b){function k(b){f=b.clientX-d.offsetLeft,g=b.clientY-d.offsetTop,a.addEvent(d,"mousemove",l),a.addEvent(j,"mouseup",m)}function l(a){b.dragable!=0&&(h=a.clientX-f,i=a.clientY-g,d.style.position="absolute",h>=0&&h<=j.body.clientWidth-d.clientWidth&&(d.style.left=h+"px"),i>=0&&i<=j.body.clientHeight-d.clientHeight&&(d.style.top=i+"px"))}function m(b){a.removeEvent(d,"mousemove",l),a.removeEvent(j,"mouseup",m)}var c={},d=b.target,e=b.bridge?b.bridge:b.target,f,g,h,i,j=document;a.addEvent(e,"mousedown",k)},c={};c.createDD=function(a){return new b(a)},a.DRAGDROP=c}(BDK),function(a){function j(a,b){return a===null||a===undefined||(b?!1:a==="")}function k(a){try{return a.replace(b,c)}catch(d){return a}}function l(a,b){return i(a,b)!==-1}function m(a){return a.replace(e,"**").length}function n(a){if(arguments.length<=1)return a||"";var b=f.call(arguments,1);return a.replace(/\{(\d+)\}/g,function(a,c){return b[c]})}function o(a){if(a){var b=a.nodeName.toUpperCase();switch(b){case"SELECT":return o(a.options[a.selectedIndex]);case"OPTION":return(a.attributes.value||{}).specified?a.value:a.text}return d.test(a.type)?a.type==="checkbox"?a.checked:a.getAttribute("value")===null?"on":a.value:a.value||""}return undefined}function p(a,b){if(!a)return"";var c=[],d=0;for(var e=0,f=a.length,g;e<=b;e++){if(e>=f)break;g=a.charCodeAt(e)<128?1:2;if(d+g>b)break;d+=g,c[c.length]=a.charAt(e)}return c.join("")}function q(a){return l(a.keyCode,h)||(a.ctrlKey||a.metaKey)&&l(a.keyCode,[67,88])}function r(b){return b._tipNode||function(){var c=b.tip&&a(b.tip),d=b.dom;if(!c||c.length===0)c=a(".info",d.parentNode),c.length===0&&(c=a('<span class="info"></span>').appendTo(d.parentNode));return b._tipNode=c,b._tipNode=c}()}var b=/^\s+|\s+$/g,c="",d=/radio|checkbox/,e=/[^\x00-\xff]/g,f=Array.prototype.slice,g=Array.prototype.indexOf,h=[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,91,92,93],i=g?function(a,b){return g.call(b,a)}:function(a,b){var c=b.length;while(c--)if(b[c]===a)return c;return-1},s=this.ValidatorManager=function(a,b){b.setMessage&&(this.setMessage=b.setMessage),this.init.apply(this,arguments)};s.prototype={init:function(a,b){var c=this;c.CLASS_NAME={err:b.errClass||"err",info:b.infoClass||"info"},c._items={};for(var d in a)a.hasOwnProperty(d)&&this.addRule(d,a[d])},addRule:function(b,c){var e=this,f=e._items;if(f[b])return;var g=a(b),h=g[0],i,k,n=function(a){e.check(c)};if(!h)return;f[b]=c,c.dom=h,k=r(c),i=c.events||[d.test(h.type)?"click":"blur"],l("focus",i)&&g.focus(function(a){var b=c.normalText||"";k.removeClass(e.CLASS_NAME.err),j(b)?k.html(""):k.show().html(b)}),l("blur",i)&&g.blur(n),l("click",i)&&g.click(n),l("change",i)&&h.tagName==="SELECT"&&g.change(n),l("keydown",i)&&(g.keydown(function(a){return q(a)?!0:c.maxlength&&m(this.value)===c.maxlength[0]?!1:e.check(c)}),c.maxlength&&g.keyup(function(a){var b=c.maxlength[0];m(this.value)>b&&(this.value=p(this.value,b))}))},removeRule:function(a){a in this._items&&delete this._items[a]},check:function(a){if(!a)return!1;var b,c=o(a.dom),d=a.pattern,e=!0;return a.trim&&(a.dom.value=k(c)),j(c)?a.require&&(e=!1,b=a.requireText):a.maxlength!==undefined&&m(c)>a.maxlength[0]?(e=!1,b=n(a.maxlength[1],a.maxlength[0])):d&&!(e=d[0].test(c))&&(b=d[1]),a.value=c,this.setMessage(a,e,b),e&&typeof a.validate=="function"&&!j(c)?a.validate.call(a,this):e},setMessage:function(a,b,c){var d=r(a);b?d.hide():d.show().html(c).addClass(this.CLASS_NAME.err)},checkByKey:function(a){return this.check(this._items[a])},validate:function(a){var b=this,c=b._items,d=!0,e=[],f;for(f in c)b.check(c[f])?e[e.length]=c[f].dom:d=!1;return typeof a=="function"&&a(e),d}}}(jQuery)